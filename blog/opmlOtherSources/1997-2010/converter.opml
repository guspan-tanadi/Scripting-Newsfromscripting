<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- OPML generated by OPML Editor v10.1b19 on Wed, 22 Dec 2021 22:16:51 GMT -->
<opml version="2.0">
	<head>
		<title>workspace.userlandSamples.convertOpmlArchive</title>
		<dateCreated>Wed, 22 Dec 2021 16:38:17 GMT</dateCreated>
		<dateModified>Wed, 22 Dec 2021 22:16:51 GMT</dateModified>
		<ownerName>Dave Winer</ownerName>
		<ownerId>http://davewiner.com/</ownerId>
		<expansionState>1, 5, 6, 8, 9, 17, 19, 23, 26, 27, 29, 31, 55</expansionState>
		<vertScrollState>22</vertScrollState>
		<windowTop>57</windowTop>
		<windowLeft>1272</windowLeft>
		<windowBottom>763</windowBottom>
		<windowRight>2302</windowRight>
		</head>
	<body>
		<outline text="on convertOpmlArchive ()">
			<outline text="Changes" isComment="true">
				<outline text="12/21/21; 3:25:01 PM by DW">
					<outline text="This script converts the archive from the form I found it in on scripting.com, to the form used in the GitHub-based archive. ">
						<outline text="Input: One OPML file for each day." created="Wed, 22 Dec 2021 16:35:39 GMT"/>
						<outline text="Output: One OPML file for each month, broken down by day inside the outline." created="Wed, 22 Dec 2021 16:36:10 GMT"/>
						</outline>
					<outline text="All other files, indexes and sitemaps, garbage left around by crappy server software, were not passed through." created="Wed, 22 Dec 2021 16:36:28 GMT"/>
					</outline>
				</outline>
			<outline text="local (sourcefolder = &quot;Macintosh HD:Users:davewiner:tmp:opmlArchive:&quot;)"/>
			<outline text="local (destfolder = &quot;Macintosh HD:Users:davewiner:tmp:opmlArchive2:&quot;)" created="Wed, 22 Dec 2021 14:48:06 GMT"/>
			<outline text="fileloop (fyear in sourcefolder) " created="Wed, 22 Dec 2021 14:47:43 GMT">
				<outline text="if file.isfolder (fyear) " created="Wed, 22 Dec 2021 14:52:04 GMT">
					<outline text="local (yearnum = number (file.filefrompath (fyear) - &quot;:&quot;))" created="Wed, 22 Dec 2021 15:32:11 GMT"/>
					<outline text="fileloop (fmonth in fyear) " created="Wed, 22 Dec 2021 14:52:12 GMT">
						<outline text="if file.isfolder (fmonth) " created="Wed, 22 Dec 2021 15:56:02 GMT">
							<outline text="local (monthnum = number (file.filefrompath (fmonth) - &quot;:&quot;))" created="Wed, 22 Dec 2021 15:21:48 GMT"/>
							<outline text="local (monthname = date.monthToString (monthnum))" created="Wed, 22 Dec 2021 15:12:57 GMT"/>
							<outline text="local (lo)" created="Wed, 22 Dec 2021 14:53:35 GMT"/>
							<outline text="new (outlinetype, @lo)" created="Wed, 22 Dec 2021 14:53:48 GMT"/>
							<outline text="target.set (@lo)" created="Wed, 22 Dec 2021 14:53:56 GMT"/>
							<outline text="edit (@lo)" created="Wed, 22 Dec 2021 14:53:56 GMT"/>
							<outline text="" created="Wed, 22 Dec 2021 15:23:11 GMT"/>
							<outline text="for (i = date.daysinmonth (monthnum) downto 1)" created="Wed, 22 Dec 2021 15:23:11 GMT">
								<outline text="local (fday = fmonth + string.padwithzeros (i, 2) + &quot;.opml&quot;)" created="Wed, 22 Dec 2021 15:23:44 GMT"/>
								<outline text="if file.exists (fday)" created="Wed, 22 Dec 2021 15:24:21 GMT">
									<outline text="local (opmltext = file.readwholefile (fday), dayoutline)" created="Wed, 22 Dec 2021 14:55:13 GMT"/>
									<outline text="op.xmltooutline (opmltext, @dayoutline)" created="Wed, 22 Dec 2021 14:55:40 GMT"/>
									<outline text="" created="Wed, 22 Dec 2021 21:23:58 GMT"/>
									<outline text="bundle //add the type=outline attributes" created="Wed, 22 Dec 2021 21:23:58 GMT">
										<outline text="local (oldtarget = target.set (@dayoutline))" created="Wed, 22 Dec 2021 21:24:06 GMT"/>
										<outline text="op.firstsummit ()" created="Wed, 22 Dec 2021 21:24:37 GMT"/>
										<outline text="loop" created="Wed, 22 Dec 2021 21:24:44 GMT">
											<outline text="if op.getlinetext () beginswith &quot;&lt;rules&quot;" created="Wed, 22 Dec 2021 21:45:46 GMT">
												<outline text="msg (&quot;rules rule&quot;)" created="Wed, 22 Dec 2021 21:47:13 GMT"/>
												</outline>
											<outline text="else " created="Wed, 22 Dec 2021 21:47:19 GMT">
												<outline text="op.attributes.setone (&quot;type&quot;, &quot;outline&quot;)" created="Wed, 22 Dec 2021 21:24:46 GMT"/>
												</outline>
											<outline text="if not op.go (down, 1)" created="Wed, 22 Dec 2021 21:25:16 GMT">
												<outline text="break" created="Wed, 22 Dec 2021 21:25:22 GMT"/>
												</outline>
											</outline>
										<outline text="target.set (oldtarget)" created="Wed, 22 Dec 2021 21:24:26 GMT"/>
										</outline>
									<outline text="" created="Wed, 22 Dec 2021 21:23:58 GMT"/>
									<outline text="local (daynum = number (file.filefrompath (fday) - &quot;.opml&quot;))" created="Wed, 22 Dec 2021 15:31:33 GMT"/>
									<outline text="local (daystring = monthname + &quot; &quot; + daynum)" created="Wed, 22 Dec 2021 15:11:47 GMT"/>
									<outline text="op.insert (daystring, down)" created="Wed, 22 Dec 2021 15:09:57 GMT"/>
									<outline text="op.attributes.setone (&quot;created&quot;, date.netstandardstring (date.set (daynum, monthnum, yearnum, 0, 0, 1)))" created="Wed, 22 Dec 2021 15:28:11 GMT"/>
									<outline text="op.insertoutline (@dayoutline, right)" created="Wed, 22 Dec 2021 14:57:14 GMT"/>
									<outline text="op.collapse ()" created="Wed, 22 Dec 2021 15:17:52 GMT"/>
									</outline>
								</outline>
							<outline text="" created="Wed, 22 Dec 2021 15:56:37 GMT"/>
							<outline text="op.firstsummit ()" created="Wed, 22 Dec 2021 14:57:42 GMT"/>
							<outline text="op.setlinetext (monthname + &quot; &quot; + yearnum)" created="Wed, 22 Dec 2021 15:38:22 GMT"/>
							<outline text="op.attributes.setone (&quot;created&quot;, date.netstandardstring (date.set (1, monthnum, yearnum, 0, 0, 2)))" created="Wed, 22 Dec 2021 15:28:11 GMT"/>
							<outline text="op.demote ()" created="Wed, 22 Dec 2021 14:57:47 GMT"/>
							<outline text="" created="Wed, 22 Dec 2021 15:44:31 GMT"/>
							<outline text="window.settitle (@lo, &quot;Scripting News&quot;)" created="Wed, 22 Dec 2021 15:44:31 GMT"/>
							<outline text="window.attributes.setOne (&quot;flPublic&quot;, true, @lo)" created="Wed, 22 Dec 2021 15:46:15 GMT"/>
							<outline text="" created="Wed, 22 Dec 2021 15:44:31 GMT"/>
							<outline text="local (opmltext = op.outlinetoxml (@lo))" created="Wed, 22 Dec 2021 14:57:51 GMT"/>
							<outline text="local (fmonth = destfolder + yearnum + &quot;:&quot; + string.padwithzeros (monthnum, 2) + &quot;.opml&quot;)" created="Wed, 22 Dec 2021 14:58:10 GMT"/>
							<outline text="file.surefilepath (fmonth)" created="Wed, 22 Dec 2021 14:59:45 GMT"/>
							<outline text="file.writewholefile (fmonth, opmltext)" created="Wed, 22 Dec 2021 14:59:51 GMT"/>
							</outline>
						</outline>
					</outline>
				</outline>
			<outline text="fileloop (f in sourcefolder, infinity) //remove garbage files" isComment="true" created="Tue, 21 Dec 2021 20:25:21 GMT">
				<outline text="local (fname = file.filefrompath (f))" created="Tue, 21 Dec 2021 20:25:30 GMT"/>
				<outline text="if fname endswith &quot;$folder$&quot;" created="Tue, 21 Dec 2021 20:25:59 GMT">
					<outline text="file.delete (f)" created="Tue, 21 Dec 2021 20:26:05 GMT"/>
					</outline>
				</outline>
			</outline>
		<outline text="bundle //test code">
			<outline text="convertOpmlArchive ()"/>
			</outline>
		</body>
	</opml>
