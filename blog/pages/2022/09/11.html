<div class="divDayTitle"><a href="http://scripting.com/2022/09/11.html">Sunday, September 11, 2022</a></div>
<div class="divSingularItem" data-type="outline" data-flInCalendar="true"><a name="a143735"></a>Today we commemorate a horrific event <a href="http://scripting.com/2001/09.html">21 years ago</a>. The pandemic is orders of magnitude more devastating than that event. And it's ongoing. It's still killing massive numbers of people and destroying lives.<span class="spPermaLink"><a href="http://scripting.com/2022/09/11.html#a143735" title="Direct link to this item.">#</a></span></div>
<div class="divSingularItem" data-type="outline" data-flInCalendar="true"><a name="a130351"></a>Trump is responsible for over a million American deaths. He knew how deadly the virus is, and did nothing to protect the country. Yes, he must be punished for trying to overthrow the government, but don't forget all the American death and suffering he's responsible for. <span class="spPermaLink"><a href="http://scripting.com/2022/09/11.html#a130351" title="Direct link to this item.">#</a></span></div>
<div class="divTitledItem">
	<div class="divTitle"><a name="a145550"></a><a href="http://scripting.com/2022/09/11/145550.html?title=newStrategyForFeedText"><span class="spTitleLink">New strategy for feed text</span></a><span class="spPermaLink"><a href="http://scripting.com/2022/09/11/145550.html?title=newStrategyForFeedText" title="Direct link to this item.">#</a></span></div>
	<ul class="ulLevel0">
	<li data-flInCalendar="true"><a name="a145925"></a>In the new feed management system, instead of stripping all HTML from the descriptions of feed items, we're now allowing &lt;p>s to get through. I want to have full text in my rivers, with a MORE icon that lets you see all the text. So the flow isn't dominated by long posts, but the text is there if you want to read it.<span class="spPermaLink"><a href="http://scripting.com/2022/09/11/145550.html?title=newStrategyForFeedText#a145925" title="Direct link to this item.">#</a></span></li>
	<li data-flInCalendar="true"><a name="a151342"></a>But I don't want all the quasi-malware that comes with feeds these days. My plan was to strip all the markup, but it really wasn't workable without the &lt;p> elements. <span class="spPermaLink"><a href="http://scripting.com/2022/09/11/145550.html?title=newStrategyForFeedText#a151342" title="Direct link to this item.">#</a></span></li>
	<li data-flInCalendar="true"><a name="a150143"></a>I put out my <a href="https://github.com/scripting/Scripting-News/issues/215#issuecomment-1242749537">braintrust query</a> yesterday and got two good answers. Use regex or the the <a href="https://github.com/apostrophecms/sanitize-html">sanitize-html</a> Node package. I went with the Node package. It builds on a full HTML parser, so it's legit technology, not a hack (though I was happy to use a hack, have been for years). <span class="spPermaLink"><a href="http://scripting.com/2022/09/11/145550.html?title=newStrategyForFeedText#a150143" title="Direct link to this item.">#</a></span></li>
	<li data-flInCalendar="true"><a name="a150252"></a>Here's the <a href="http://scripting.com/images/2022/09/11/before.png">before</a> and <a href="http://scripting.com/images/2022/09/11/after.png">after</a> in screen shots. <span class="spPermaLink"><a href="http://scripting.com/2022/09/11/145550.html?title=newStrategyForFeedText#a150252" title="Direct link to this item.">#</a></span></li>
	<li data-flInCalendar="true"><a name="a151220"></a>It was a good call. I thought about enabling other HTML elements, but decided to stop here for now. <span class="spPermaLink"><a href="http://scripting.com/2022/09/11/145550.html?title=newStrategyForFeedText#a151220" title="Direct link to this item.">#</a></span></li>
	<li data-flInCalendar="true"><a name="a151542"></a>PS: Recall we already have <a href="http://scripting.com/2022/07/19/152235.html?title=devNotesForMarkdownInRss">support for Markdown</a> in the feed system. So there's an even better way for friendly feed writers to do this, rather than trying to gum things up so badly that all we can do is nuke <s>all</s> most of the markup. <span class="spOldSchoolEmoji">ðŸ’¥</span><span class="spPermaLink"><a href="http://scripting.com/2022/09/11/145550.html?title=newStrategyForFeedText#a151542" title="Direct link to this item.">#</a></span></li>
	</ul>

	</div>
<div class="divTitledItem">
	<div class="divTitle"><a name="a153521"></a><a href="http://scripting.com/2022/09/11/153521.html?title=aTestbedForHtmlInFeeds"><span class="spTitleLink">A testbed for HTML in feeds</span></a><span class="spPermaLink"><a href="http://scripting.com/2022/09/11/153521.html?title=aTestbedForHtmlInFeeds" title="Direct link to this item.">#</a></span></div>
	<ul class="ulLevel0">
	<li data-flInCalendar="true"><a name="a153546"></a>Here's a <a href="http://drummer.scripting.com/?url=http://scripting.com/publicfolder/misc/stripMarkupInFeedItems/source.opml">link that opens in Drummer</a>. It contains the package.json, a template file and the JS code that reads an RSS feed and produces an HTML rendering of the items in the feed after running the description text through sanitize-html with the p's removed. Once written it made it easy for me to try out a lot of different combinations for the options, but I settled on the simplest.<span class="spPermaLink"><a href="http://scripting.com/2022/09/11/153521.html?title=aTestbedForHtmlInFeeds#a153546" title="Direct link to this item.">#</a></span></li>
	<li data-flInCalendar="true"><a name="a153714"></a>It uses the <a href="https://github.com/scripting/reallysimple">reallySimple package</a> to read the feed, and is thus a good demonstration of how easy that is.<span class="spPermaLink"><a href="http://scripting.com/2022/09/11/153521.html?title=aTestbedForHtmlInFeeds#a153714" title="Direct link to this item.">#</a></span></li>
	<li data-flInCalendar="true"><a name="aNaNNaNNaN"></a>I usually would have done the work to put it into a GitHub repo, but this is a lot easier for me, because this is how I work on my code.<span class="spPermaLink"><a href="http://scripting.com/2022/09/11/153521.html?title=aTestbedForHtmlInFeeds#aNaNNaNNaN" title="Direct link to this item.">#</a></span></li>
	<li data-flInCalendar="true"><a name="aNaNNaNNaN"></a>If people can read the code in the outliner (you can!), that will make it possible for me to share a lot more code. :-)<span class="spPermaLink"><a href="http://scripting.com/2022/09/11/153521.html?title=aTestbedForHtmlInFeeds#aNaNNaNNaN" title="Direct link to this item.">#</a></span></li>
	</ul>

	</div>
